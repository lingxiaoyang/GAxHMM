<pre class="code">
<span class="srcline"><span class="lineno"><a href="20,1" id="srcline1"> 1</a></span><span class="line"><span class="keyword">function</span> [<span class="var type1" id="S2T12U3">Mnotes</span>, <span class="var type1" id="S3T1U4">notes</span>] = notes2matrixnotes(<span class="mxinfo " id="T1:U3"><span class="mxinfo " id="T1:U4"><span class="var type1" id="S3T1U7">notes</span></span></span>,<span class="var type1" id="S4T2U8">hopsize_secs</span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,2" id="srcline2"> 2</a></span><span class="line"><span class="mxinfo " id="T1:U7"><span class="var type1" id="S3T1U11">notes</span>=<span class="mxinfo " id="T1:U9"><span class="var type1" id="S3T1U13">notes</span>(<span class="mxinfo " id="T28:U11"><span class="mxinfo " id="T36:U12"><span class="var type1" id="S3T1U16">notes</span>(<span class="mxinfo " id="T32:U14">:</span>,<span class="mxinfo " id="T6:U15">3</span>)</span>&gt;<span class="mxinfo " id="T2:U16">0</span></span>,<span class="mxinfo " id="T53:U17">:</span>)</span></span>; <span class="comment">%Remove 0-pitch notes.</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,3" id="srcline3"> 3</a></span><span class="line"><span class="mxinfo " id="T2:U18"><span class="var type1" id="S5T2U23">Hend</span>=<span class="mxinfo " id="T2:U20">round(<span class="mxinfo " id="T2:U21"><span class="mxinfo " id="T2:U22">max(<span class="mxinfo " id="T2:U23">max(<span class="mxinfo " id="T2:U24"><span class="var type1" id="S3T1U32">notes</span>(<span class="mxinfo " id="T2:U26">end</span>,<span class="mxinfo " id="T6:U27">2</span>)</span>)</span>,<span class="mxinfo " id="T2:U28">max(<span class="mxinfo " id="T2:U29"><span class="var type1" id="S3T1U39">notes</span>(<span class="mxinfo " id="T2:U31">end</span>,<span class="mxinfo " id="T6:U32">1</span>)</span>)</span>)</span>/<span class="var type1" id="S4T2U43">hopsize_secs</span></span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,4" id="srcline4"> 4</a></span><span class="line"><span class="mxinfo " id="T2:U34"><span class="var type1" id="S9T2U46">maxj</span>=<span class="mxinfo " id="T2:U36">size(<span class="var type1" id="S3T1U49">notes</span>,1)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,5" id="srcline5"> 5</a></span><span class="line"><span class="mxinfo " id="T2:U38"><span class="var type1" id="S11T2U53">i</span>=<span class="mxinfo " id="T2:U40">0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,6" id="srcline6"> 6</a></span><span class="line"><span class="mxinfo " id="T2:U41"><span class="var type1" id="S12T2U57">j</span>=<span class="mxinfo " id="T2:U43">1</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,7" id="srcline7"> 7</a></span><span class="line"><span class="mxinfo " id="T12:U44"><span class="var type1" id="S13T12U61">f0</span>=<span class="mxinfo " id="T12:U46">zeros(<span class="var type1" id="S9T2U64">maxj</span>,<span class="var type1" id="S5T2U65">Hend</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,8" id="srcline8"> 8</a></span><span class="line"></span></span>
<span class="srcline"><span class="lineno"><a href="20,9" id="srcline9"> 9</a></span><span class="line"><span class="keyword">while</span> (<span class="mxinfo " id="T7:U49"><span class="var type1" id="S11T2U70">i</span>&lt;<span class="var type1" id="S5T2U71">Hend</span></span>)&amp;&amp;(<span class="mxinfo " id="T7:U52"><span class="var type1" id="S12T2U74">j</span>&lt;=<span class="var type1" id="S9T2U75">maxj</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,10" id="srcline10">10</a></span><span class="line">    <span class="mxinfo " id="T2:U55"><span class="var type1" id="S11T2U78">i</span>=<span class="mxinfo " id="T2:U57"><span class="var type1" id="S11T2U80">i</span>+<span class="mxinfo " id="T2:U59">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,11" id="srcline11">11</a></span><span class="line">    <span class="mxinfo " id="T2:U60"><span class="var type1" id="S15T2U84">t</span> = <span class="mxinfo " id="T2:U62"><span class="var type1" id="S11T2U86">i</span>*<span class="var type1" id="S4T2U87">hopsize_secs</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,12" id="srcline12">12</a></span><span class="line">    <span class="keyword">if</span> (<span class="mxinfo " id="T7:U65"><span class="var type1" id="S15T2U93">t</span>&gt;<span class="mxinfo " id="T2:U67"><span class="var type1" id="S3T1U95">notes</span>(<span class="var type1" id="S12T2U96">j</span>,<span class="mxinfo " id="T2:U70">1</span>)</span></span>)&amp;&amp;(<span class="mxinfo " id="T7:U71"><span class="var type1" id="S15T2U100">t</span>&lt;<span class="mxinfo " id="T2:U73"><span class="var type1" id="S3T1U102">notes</span>(<span class="var type1" id="S12T2U103">j</span>,<span class="mxinfo " id="T2:U76">2</span>)</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,13" id="srcline13">13</a></span><span class="line">        <span class="mxinfo " id="T2:U77"><span class="mxinfo " id="T2:U78"><span class="var type1" id="S13T12U108">f0</span>(<span class="var type1" id="S12T2U109">j</span>,<span class="var type1" id="S11T2U110">i</span>)</span>=<span class="mxinfo " id="T2:U82"><span class="var type1" id="S3T1U112">notes</span>(<span class="var type1" id="S12T2U113">j</span>,<span class="mxinfo " id="T2:U85">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,14" id="srcline14">14</a></span><span class="line">    <span class="keyword">elseif</span> (<span class="mxinfo " id="T7:U86"><span class="var type1" id="S15T2U118">t</span>&gt;<span class="mxinfo " id="T2:U88"><span class="var type1" id="S3T1U120">notes</span>(<span class="var type1" id="S12T2U121">j</span>,<span class="mxinfo " id="T2:U91">2</span>)</span></span>)</span></span>
<span class="srcline"><span class="lineno"><a href="20,15" id="srcline15">15</a></span><span class="line">        <span class="mxinfo " id="T2:U92"><span class="var type1" id="S12T2U125">j</span>=<span class="mxinfo " id="T2:U94"><span class="var type1" id="S12T2U127">j</span>+<span class="mxinfo " id="T2:U96">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,16" id="srcline16">16</a></span><span class="line">        <span class="mxinfo " id="T2:U97"><span class="var type1" id="S11T2U131">i</span>=<span class="mxinfo " id="T2:U99"><span class="var type1" id="S11T2U133">i</span>-<span class="mxinfo " id="T2:U101">1</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,17" id="srcline17">17</a></span><span class="line">    <span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,18" id="srcline18">18</a></span><span class="line"><span class="keyword">end</span></span></span>
<span class="srcline"><span class="lineno"><a href="20,19" id="srcline19">19</a></span><span class="line"><span class="mxinfo " id="T12:U102"><span class="var type1" id="S2T12U137">Mnotes</span>=<span class="var type1" id="S13T12U138">f0</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,20" id="srcline20">20</a></span><span class="line"><span class="mxinfo " id="T36:U105"><span class="mxinfo " id="T36:U106"><span class="var type1" id="S3T1U142">notes</span>(<span class="mxinfo " id="T32:U108">:</span>,<span class="mxinfo " id="T6:U109">1</span>)</span>=<span class="mxinfo " id="T36:U110"><span class="var type1" id="S3T1U146">notes</span>(<span class="mxinfo " id="T32:U112">:</span>,<span class="mxinfo " id="T6:U113">1</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,21" id="srcline21">21</a></span><span class="line"><span class="mxinfo " id="T36:U114"><span class="mxinfo " id="T36:U115"><span class="var type1" id="S3T1U152">notes</span>(<span class="mxinfo " id="T32:U117">:</span>,<span class="mxinfo " id="T6:U118">2</span>)</span>=<span class="mxinfo " id="T36:U119"><span class="mxinfo " id="T36:U120"><span class="var type1" id="S3T1U157">notes</span>(<span class="mxinfo " id="T32:U122">:</span>,<span class="mxinfo " id="T2:U123">2</span>)</span>-<span class="mxinfo " id="T36:U124"><span class="var type1" id="S3T1U161">notes</span>(<span class="mxinfo " id="T32:U126">:</span>,<span class="mxinfo " id="T2:U127">1</span>)</span></span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,22" id="srcline22">22</a></span><span class="line"><span class="mxinfo " id="T36:U128"><span class="mxinfo " id="T36:U129"><span class="var type1" id="S3T1U167">notes</span>(<span class="mxinfo " id="T32:U131">:</span>,<span class="mxinfo " id="T6:U132">3</span>)</span>=<span class="mxinfo " id="T36:U133"><span class="var type1" id="S3T1U171">notes</span>(<span class="mxinfo " id="T32:U135">:</span>,<span class="mxinfo " id="T2:U136">3</span>)</span></span>;</span></span>
<span class="srcline"><span class="lineno"><a href="20,23" id="srcline23">23</a></span><span class="line"><span class="keyword">end</span></span></span>
</pre>
